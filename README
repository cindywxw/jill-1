#-*- mode: org -*-
#+STARTUP:    align fold hidestars oddeven
#+TITLE:    JILL Real-Time Audio Framework
#+AUTHOR:    Dan Meliza
#+EMAIL:     dan@meliza.org
#+LANGUAGE:   en

JILL is a C++ framework for writing clients for JACK, the real-time
audio toolkit.  It also comes with a number of useful clients.  This
document contains instructions on how to install JILL and its
dependencies.  Consult doc/user_guide.org for more information on
using JILL, and doc/programming_guide.org for more information on
writing new clients using the JILL framework.

* Requirements

JILL's primary dependency is on JACK (http://jackaudio.org). In
theory, either JACK 1 or JACK 2 can be used, but so far JILL has only
been tested on JACK 1.

** Basic dependencies

In addition to JACK, JILL depends on a number of other libraries.
All of these are available through package managers with the exception
of arf, a library for storing data to ARF containers.

*** Linux

Install dependencies using yum or another package manager:

#+begin_src sh
  yum install boost-devel jack-audio-connection-kit-devel \
    libsndfile-devel libsamplerate-devel alsa-lib-devel hdf5-devel scons
#+end_src

On CentOS machines it's necessary to first point yum to the Fedora
epel repository. In the following command, replace <arch> with x86_64
(64-bit) or i386 (32-bit); replace <version> with 5-3, 5-4, etc,
depending on the version of CentOS you are running.

#+begin_src sh
rpm -Uvh http://download.fedora.redhat.com/pub/epel/5/<arch>/epel-release-<version>.noarch.rpm
#+end_src

In order to run the jack daemon as a user process, the permissions on
the device files under /dev/snd need to be changed. Alternatively,
users needed access to the devices can be granted access to the audio
group. To set the sound devices as world-writable, edit
/etc/udev/rules.d/90-alsa.rules:

#+begin_src sh
SUBSYSTEM=="sound", KERNEL=="controlC*" RUN+="/sbin/salsa", MODE="0666"
SUBSYSTEM=="sound", KERNEL=="pcm*"      RUN+="/sbin/salsa", MODE="0666"
#+end_src

*** OS X

Assuming you've installed MacPorts:

#+begin_src sh
  port install boost jack hdf5-18
#+end_src

*** ARF library

Install ARF as follows:

#+begin_src sh
  curl http://wail/distfiles/arf-1.1.0.tar.gz -O
  tar zxvf arf-1.1.0.tar.gz && cd arf-1.1.0
  scons -Q install
#+end_src

** Low-latency operation

JACK is a real-time audio server, and provides much better performance
if the Linux kernel is patched for low-latency operation. This step
can be skipped on machines that are only used to record audio data,
but if you plan to record from many channels at the same time, or to
do any amount of real-time processing, this is highly reccomended.


#+begin_src sh
  rpm -Uvh http://people.centos.org/hughesjr/kernel-rt/<arch1>/kernel-rt-2.6.24.7-65.el5rt.centos.<arch2>.rpm
  rpm -Uvh http://people.centos.org/hughesjr/kernel-rt/<arch1>/kernel-rt-devel-2.6.24.7-65.el5rt.centos.<arch2>.rpm
#+end_src

Replace <arch1> with x86_64 for 64-bit machines, and i386 for 32-bit
machines. <arch2> is x86_64 for 64-bit and i686 for 32-bit.

The RT kernel will not boot by default. To change this, edit
/boot/grub/grub.conf and change the line "default=1" so that the
number corresponds to the 2.6.24.7-65.el5rt.centos kernel.

* Installation

JILL comprises a library, a set of headers, and a number of modules.
To compile both library and modules:

#+begin_src sh
scons -Q library modules
#+end_src

To install the headers, library, and modules in a system location, use
the following command:

#+begin_src sh
scons -Q install --prefix <prefix>
#+end_src

The default prefix is /usr/local, but this can be changed with the
prefix argument.




## Copyright 2010 Daniel Meliza
##
## Author: dmeliza@dylan.uchicago.edu
## Keywords:





